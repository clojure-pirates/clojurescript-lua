#!/bin/bash

# Compile a single cljs file or a directory of cljs files into a
# single JavaScript file.


DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

CLJSC_CP=''
for next in $DIR/../cljs $DIR/../lib/* $DIR/../src $DIR/../libclojurescript.jar; do
    CLJSC_CP=$CLJSC_CP:$next
done

if test $# -eq 0
then
  echo "Usage: cljsc <file-or-dir>"
  echo "       cljsc <file-or-dir> {:optimizations :advanced}"
else
  java -server -cp $CLJSC_CP clojure.main $DIR/cljsc.clj $*
fi
